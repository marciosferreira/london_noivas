<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Vestidos Alugados</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<h1>Vestidos Alugados (Não Devolvidos)</h1>
<a href="{{ url_for('returned') }}">Ver Devolvidos</a> | 
<a href="{{ url_for('add') }}">Inserir Novo Registro</a>

<table>
    <tr>
        <th>Imagem</th>
        <th>Cliente</th>
        <th>Data de Retirada</th>
        <th>Data de Devolução</th>
        <th>Comentários</th>
        <th>Ações</th>
    </tr>
    {% for dress in dresses %}
    <tr style="{% if dress.overdue %}background-color:red;{% endif %}">
        <td>
            {% if dress.image_url and dress.image_url != "" %}
                <img src="{{ dress.image_url }}" alt="Imagem do vestido" style="max-width:100px;cursor:pointer;" class="dress-thumbnail">
            {% else %}
                <img src="{{ url_for('static', filename='dress-placeholder.png') }}" alt="Sem Imagem" style="max-width:100px;">
            {% endif %}
        </td>
        <td>{{ dress.client_name }}</td>
        <td>{{ dress.rental_date }}</td>
        <td>{{ dress.return_date }}</td>
        <td>{{ dress.comments }}</td>
        <td>
            <form method="POST" action="{{ url_for('delete', dress_id=dress.dress_id) }}" 
                  onsubmit="return confirm('Tem certeza que deseja deletar este registro?');" style="display:inline;">
                <button type="submit" style="background-color:red;color:white;">Deletar</button>
            </form>
            <a href="{{ url_for('edit', dress_id=dress.dress_id) }}">Editar</a>
            <form method="POST" action="{{ url_for('mark_returned', dress_id=dress.dress_id) }}" style="display:inline;">
                <button type="submit" style="background-color:green;color:white;">Marcar como Devolvido</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
</body>
</html>
